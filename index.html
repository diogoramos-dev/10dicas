<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>10dicas ‚Äî Descubra com at√© 10 dicas</title>
  
  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="theme-color" content="#1F2937">
  
  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    #feedback {
      min-height: 1.2rem;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-xl bg-gray-900 rounded-3xl p-6 shadow-xl border border-gray-800">
    <!-- Logo / Header -->
    <header class="text-center mb-6">
      <h1 class="text-4xl font-extrabold tracking-tight">
        <span class="text-blue-500">10</span>dicas
      </h1>
      <div class="flex items-center justify-center gap-2 mt-2">
        <p class="text-sm text-gray-400">Descubra a palavra do dia em at√© 10 dicas</p>
        <button id="infoBtn" class="text-gray-500 hover:text-gray-300 transition-colors text-sm w-5 h-5 rounded-full bg-gray-700 flex items-center justify-center">‚Ñπ</button>
      </div>
    </header>

    <!-- Estat√≠sticas -->
    <section class="mb-6 text-center">
      <div class="grid grid-cols-2 gap-4">
        <div class="bg-gray-800 rounded-xl p-3 border border-gray-700">
          <p class="text-xs text-gray-400 mb-1">Tentativas</p>
          <p id="attemptsCount" class="text-lg font-bold text-blue-400">0</p>
        </div>
        <div class="bg-gray-800 rounded-xl p-3 border border-gray-700">
          <p class="text-xs text-gray-400 mb-1">Dicas usadas</p>
          <p id="hintsCount" class="text-lg font-bold text-green-400">0</p>
        </div>
      </div>
    </section>

    <!-- Bot√µes das dicas -->
    <section class="mb-6">
      <p class="text-gray-300 mb-3 font-semibold">Revelar dica</p>
      <div id="hintButtons" class="grid grid-cols-5 gap-2"></div>
      <div id="revealedHints" class="mt-5 text-gray-200 space-y-3"></div>
    </section>

    <!-- Chute -->
    <section id="guessSection" class="mb-6">
      <input id="guessInput" type="text" placeholder="Digite sua resposta"
        class="w-full p-3 rounded-xl text-black mb-1 focus:ring-2 focus:ring-blue-500 outline-none" />
      <button id="guessBtn"
        class="w-full bg-blue-600 hover:bg-blue-700 transition-colors rounded-xl p-3 font-semibold shadow-lg">
        Chutar
      </button>
      <p id="feedback" class="text-red-400"></p>
    </section>

    <!-- Desistir -->
    <section id="giveUpSection" class="mb-6">
      <button id="giveUpBtn"
        class="w-full bg-red-600 hover:bg-red-700 transition-colors rounded-xl p-3 font-semibold shadow-lg">
        Desistir
      </button>
    </section>

    <!-- Resultado -->
    <div id="result" class="hidden mt-6 p-4 bg-gray-800 rounded-2xl border border-gray-700"></div>

    <footer class="mt-6 text-xs text-gray-500 text-center">
      <p>¬© 2025 <span class="text-blue-500 font-bold">10dicas</span> ‚Ä¢ Um jogo di√°rio de adivinha√ß√£o</p>
    </footer>
  </div>

  <!-- Modal de Informa√ß√µes -->
  <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-600 shadow-xl transform transition-transform duration-300 scale-95">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold text-white">üí° Tipos de palavras aceitas</h3>
        <button id="closeModal" class="text-gray-400 hover:text-white transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="text-gray-300 text-sm leading-relaxed max-h-60 overflow-y-auto">
        <p>A palavra do dia pode ser: substantivos comuns (casa, livro), pessoas famosas (Albert Einstein, Ayrton Senna), lugares (Brasil, Marte), palavras compostas (guarda-chuva) e locu√ß√µes substantivas (cesta b√°sica).</p>
      </div>
    </div>
  </div>

  <script>
    /* 
    DESENVOLVEDOR: Para resetar o jogo do dia durante os testes, 
    abra o Console do navegador (F12) e digite: resetTodayGame()
    */
    const GAME_NAME = "10dicas";

    const gameOfTheDay = {
      answer: "Grau",
      hints: [
        "Tem no √≥culos.",
        "Pode ser dividido em segundos.",
        "Tem na previs√£o do tempo.",
        "Tem na fam√≠lia.",
        "Tem nas coordenadas geogr√°ficas.",
        "Tem no ensino.",
        "Pode ser dividido em minutos.",
        "Representado por um pequeno c√≠rculo.",
        "Tem no √¢ngulo.",
        "Tem na queimadura."
      ]
    };

    let revealed = [];
    let attempts = 0;
    let finished = false;
    let feedbackTimeout;

    // Sistema de jogo di√°rio
    function getTodayKey() {
      const today = new Date();
      return `10dicas_${today.getFullYear()}_${today.getMonth() + 1}_${today.getDate()}`;
    }

    function saveGameState(isFinished = false, won = false) {
      const todayKey = getTodayKey();
      const gameState = {
        status: isFinished ? "finished" : "playing",
        revealed: revealed,
        attempts: attempts,
        timestamp: Date.now()
      };

      if (isFinished) {
        gameState.won = won;
        gameState.hints = revealed.length;
        gameState.revealedHints = revealed;
        gameState.answer = gameOfTheDay.answer;
      }

      localStorage.setItem(todayKey, JSON.stringify(gameState));
    }

    function loadGameState() {
      const todayKey = getTodayKey();
      const saved = localStorage.getItem(todayKey);
      return saved ? JSON.parse(saved) : null;
    }

    function hasPlayedToday() {
      const gameState = loadGameState();
      return gameState && gameState.status === "finished";
    }

    // Fun√ß√£o para desenvolvedores resetarem o jogo (console do navegador)
    function resetTodayGame() {
      const todayKey = getTodayKey();
      localStorage.removeItem(todayKey);
      location.reload();
    }
    
    // Torna a fun√ß√£o global para acesso via console
    window.resetTodayGame = resetTodayGame;

    function createHintButtons() {
      const hintButtonsContainer = document.getElementById("hintButtons");
      for (let i = 1; i <= 10; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.id = `hintBtn${i}`;
        btn.className = "bg-gray-800 hover:bg-gray-700 transition-colors rounded-xl p-3 text-sm font-bold";
        btn.addEventListener("click", () => revealHint(i));
        hintButtonsContainer.appendChild(btn);
      }
    }

    function showAlreadyPlayedResult() {
      const gameState = loadGameState();
      if (!gameState || gameState.status !== "finished") return;

      finished = true;
      attempts = gameState.attempts;
      
      // Usa os n√∫meros das dicas originais se dispon√≠vel, sen√£o fallback para o m√©todo antigo
      revealed = gameState.revealedHints || Array.from({length: gameState.hints}, (_, i) => i + 1);
      
      // Mostra as estat√≠sticas
      updateCounters();
      
      // Desabilita todos os bot√µes de dica e revela as dicas usadas
      revealed.forEach(hintNum => {
        const btn = document.getElementById(`hintBtn${hintNum}`);
        btn.disabled = true;
        btn.classList.add("opacity-40", "cursor-not-allowed");
        
        const container = document.getElementById("revealedHints");
        const p = document.createElement("p");
        p.innerHTML = `üí° <span class="font-semibold text-blue-400">Dica ${hintNum}:</span> ${gameOfTheDay.hints[hintNum - 1]}`;
        container.appendChild(p);
      });

      // Esconde se√ß√µes de chute e desistir
      document.getElementById("guessSection").classList.add("hidden");
      document.getElementById("giveUpSection").classList.add("hidden");

      // Mostra o resultado
      const resultDiv = document.getElementById("result");
      resultDiv.classList.remove("hidden");

      if (gameState.won) {
        resultDiv.innerHTML = `
          <p class="font-bold text-green-400 text-lg">üéâ Voc√™ j√° jogou hoje!</p>
          <p class="mt-2 text-gray-300">Acertou em ${gameState.attempts} ${pluralize(gameState.attempts, 'tentativa', 'tentativas')} e ${gameState.hints === 0 ? 'sem usar dicas' : `${gameState.hints} ${pluralize(gameState.hints, 'dica', 'dicas')}`}.</p>
          <p class="mt-2 text-gray-400 text-sm">Volte amanh√£ para um novo jogo.</p>
          <div class="mt-3">
            <button id="shareBtn" class="w-full bg-blue-600 hover:bg-blue-700 transition-colors rounded-xl p-3 font-semibold">Compartilhar</button>
          </div>
        `;
      } else {
        resultDiv.innerHTML = `
          <p class="font-bold text-red-400 text-lg">üéØ Voc√™ j√° jogou hoje!</p>
          <p class="mt-2 text-gray-300">Desistiu do jogo. A resposta era <b>${gameState.answer}</b>.</p>
          <p class="mt-2 text-gray-400 text-sm">Volte amanh√£ para um novo jogo.</p>
          <div class="mt-3">
            <button id="shareBtn" class="w-full bg-blue-600 hover:bg-blue-700 transition-colors rounded-xl p-3 font-semibold">Compartilhar</button>
          </div>
        `;
      }

      document.getElementById("shareBtn").addEventListener("click", () => shareResult(gameState.won));
    }

    // Inicializa√ß√£o do jogo
    function initializeGame() {
      // Sempre cria os bot√µes primeiro
      createHintButtons();
      
      // Verifica se j√° jogou hoje
      if (hasPlayedToday()) {
        showAlreadyPlayedResult();
        return;
      }
      
      // Carrega progresso salvo (dicas j√° reveladas)
      const gameState = loadGameState();
      if (gameState && gameState.status === "playing") {
        revealed = gameState.revealed;
        attempts = gameState.attempts;
        updateCounters();
        
        // Restaura as dicas j√° reveladas
        revealed.forEach(hintNum => {
          const btn = document.getElementById(`hintBtn${hintNum}`);
          btn.disabled = true;
          btn.classList.add("opacity-40", "cursor-not-allowed");
          
          const container = document.getElementById("revealedHints");
          const p = document.createElement("p");
          p.innerHTML = `üí° <span class="font-semibold text-blue-400">Dica ${hintNum}:</span> ${gameOfTheDay.hints[hintNum - 1]}`;
          container.appendChild(p);
        });
      }
    }

    // Inicializa o jogo
    initializeGame();

    // Modal de informa√ß√µes
    const infoBtn = document.getElementById('infoBtn');
    const infoModal = document.getElementById('infoModal');
    const closeModal = document.getElementById('closeModal');

    function openModal() {
      infoModal.classList.remove('opacity-0', 'pointer-events-none');
      infoModal.classList.add('opacity-100');
      infoModal.querySelector('.bg-gray-800').classList.remove('scale-95');
      infoModal.querySelector('.bg-gray-800').classList.add('scale-100');
      document.body.style.overflow = 'hidden'; // Previne scroll do fundo
    }

    function closeModalFunc() {
      infoModal.classList.remove('opacity-100');
      infoModal.classList.add('opacity-0', 'pointer-events-none');
      infoModal.querySelector('.bg-gray-800').classList.remove('scale-100');
      infoModal.querySelector('.bg-gray-800').classList.add('scale-95');
      document.body.style.overflow = ''; // Restaura scroll
    }

    // Abre modal ao clicar no bot√£o info
    infoBtn.addEventListener('click', (e) => {
      e.preventDefault();
      openModal();
    });

    // Fecha modal ao clicar no X
    closeModal.addEventListener('click', closeModalFunc);

    // Fecha modal ao clicar no fundo escuro
    infoModal.addEventListener('click', (e) => {
      if (e.target === infoModal) {
        closeModalFunc();
      }
    });

    // Fecha modal com tecla Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !infoModal.classList.contains('pointer-events-none')) {
        closeModalFunc();
      }
    });

    function revealHint(num) {
      if (finished || revealed.includes(num)) return;
      revealed.push(num);
      const btn = document.getElementById(`hintBtn${num}`);
      btn.disabled = true;
      btn.classList.add("opacity-40", "cursor-not-allowed");
      const container = document.getElementById("revealedHints");
      const p = document.createElement("p");
      p.innerHTML = `üí° <span class="font-semibold text-blue-400">Dica ${num}:</span> ${gameOfTheDay.hints[num - 1]}`;
      container.appendChild(p);
      updateCounters();
      saveGameState(); // Salva estado atual
    }

    function updateCounters() {
      document.getElementById("attemptsCount").textContent = attempts;
      document.getElementById("hintsCount").textContent = revealed.length;
    }

    function showFeedback(message, color, autoClear = true) {
      // Clear any existing timeout
      if (feedbackTimeout) {
        clearTimeout(feedbackTimeout);
      }
      
      feedback.textContent = message;
      feedback.style.color = color;
      
      if (autoClear) {
        feedbackTimeout = setTimeout(() => {
          feedback.textContent = "";
        }, 3000);
      }
    }

    const input = document.getElementById("guessInput");
    const feedback = document.getElementById("feedback");

    document.getElementById("guessBtn").addEventListener("click", makeGuess);
    document.getElementById("giveUpBtn").addEventListener("click", giveUp);
    
    // Permite enviar resposta com Enter
    input.addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        makeGuess();
      }
    });

    function normalizeText(text) {
      return text.toLowerCase()
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '');
    }

    function pluralize(count, singular, plural, zeroText = null) {
      if (count === 0 && zeroText) return zeroText;
      return count === 1 ? singular : plural;
    }

    function makeGuess() {
      if (finished) return;
      const guess = input.value.trim();
      if (!guess) {
        showFeedback("‚ö†Ô∏è Digite uma resposta!", "#fbbf24");
        return;
      }

      attempts++;
      updateCounters();
      saveGameState(); // Salva estado atual
      
      if (normalizeText(guess) === normalizeText(gameOfTheDay.answer)) {
        endGame(true);
      } else {
        showFeedback("‚ùå Resposta incorreta. Tente novamente ou revele outra dica.", "#ef4444");
      }

      input.value = "";
      input.focus();
    }

    function giveUp() {
      if (finished) return;
      endGame(false);
    }

    function endGame(won) {
      finished = true;
      
      // Salva o estado final do jogo
      saveGameState(true, won);
      
      // Clear any pending feedback timeout
      if (feedbackTimeout) {
        clearTimeout(feedbackTimeout);
      }
      
      const resultDiv = document.getElementById("result");
      resultDiv.classList.remove("hidden");
      feedback.textContent = "";

      // esconde se√ß√µes de chute e desistir
      document.getElementById("guessSection").classList.add("hidden");
      document.getElementById("giveUpSection").classList.add("hidden");

      if (won) {
        resultDiv.innerHTML = `
          <p class="font-bold text-green-400 text-lg">üéâ Voc√™ acertou em ${attempts} ${pluralize(attempts, 'tentativa', 'tentativas')} e ${revealed.length === 0 ? 'sem usar dicas' : `${revealed.length} ${pluralize(revealed.length, 'dica', 'dicas')}`}!</p>
          <p class="mt-2 text-gray-300">Volte amanh√£ para um novo jogo.</p>
          <div class="mt-3">
            <button id="shareBtn" class="w-full bg-blue-600 hover:bg-blue-700 transition-colors rounded-xl p-3 font-semibold">Compartilhar</button>
          </div>
        `;
      } else {
        resultDiv.innerHTML = `
          <p class="font-bold text-red-400 text-lg">üò¢ Voc√™ desistiu. A resposta era <b>${gameOfTheDay.answer}</b>.</p>
          <p class="mt-2 text-gray-300">Volte amanh√£ para um novo jogo.</p>
          <div class="mt-3">
            <button id="shareBtn" class="w-full bg-blue-600 hover:bg-blue-700 transition-colors rounded-xl p-3 font-semibold">Compartilhar</button>
          </div>
        `;
      }

      document.getElementById("shareBtn").addEventListener("click", () => shareResult(won));
    }

    function shareResult(won) {
      const text = won
        ? `üéØ No ${GAME_NAME} acertei em ${attempts} ${pluralize(attempts, 'tentativa', 'tentativas')} e ${revealed.length === 0 ? 'sem usar dicas' : `${revealed.length} ${pluralize(revealed.length, 'dica', 'dicas')}`}! Jogue voc√™ tamb√©m em: ${location.href}`
        : `üò¢ No ${GAME_NAME} desisti hoje. Jogue voc√™ tamb√©m em: ${location.href}`;

      if (navigator.share) {
        navigator.share({ title: `${GAME_NAME} ‚Äî meu resultado`, text })
          .catch(() => {});
      } else if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
          alert("Resultado copiado! Cole no WhatsApp ou redes sociais.");
        });
      } else {
        prompt("Copie seu resultado:", text);
      }
    }
  </script>
</body>
</html>
